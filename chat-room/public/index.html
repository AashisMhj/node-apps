<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css"
			integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk="
			crossorigin="anonymous"
		/>
		<link rel="stylesheet" href="css/style.css" />
		<title>ChatCord App</title>
	</head>
	<body>
		<div class="join-container">
			<header class="join-header">
				<h1><i class="fas fa-smile"></i> ChatCord</h1>
			</header>
			<main class="join-main">
				<form action="chat.html">
					<div class="form-control">
						<label for="username">Username</label>
						<input
							type="text"
							name="username"
							id="username"
							placeholder="Enter username..."
							required
						/>
					</div>
					<!-- <div class="form-control">
						<label for="room">Room Id:</label>
						<input type="text" name="room" id="room" required></input>
					</div> -->
					<div class="form-control">
						<label for="room">Select Room</label>
						<select name="room" id="room">
						</select>
					</div>
					<!-- <div class="form-control">
						<input type="text" id="cars">
						<datalist id="cars">
							<option value="boston">Boston</option>
							<option value="cambridge">cambridge</option>
						</datalist>
					</div> -->
					<button type="submit" class="btn">Join Chat</button>
					<a href="new.html"><button type="button" class="btn" >Create New Room</button></a>
				</form>
			</main>
		</div>
		<script>
			let roomsOption = document.getElementById('room');
			let name = document.getElementById('username');
			(function(){
				fetch('http://localhost:5001/rooms', {method: 'GET'})
				.then(response => response.json())
				.then(result =>{
					let rooms = result.rooms;
					rooms.forEach(element => {
						let addElement = document.createElement('option');
						addElement.value = element;
						addElement.innerText = element;
						roomsOption.appendChild(addElement);
					});
				})
				
			})();
			function makeid(length) {
				var result           = [];
				var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
				var charactersLength = characters.length;
				for ( var i = 0; i < length; i++ ) {
				result.push(characters.charAt(Math.floor(Math.random() * 
			charactersLength)));
			}
				return result.join('');
			}
			// function create(e){
				
			// 	e.preventDefault();
			// 	let newInput = document.createElement('input');
			// 	newInput.id = "room";
			// 	// newInput.className = "form-control";
			// 	roomsOption.parentNode.replaceChild(newInput, roomsOption);
			// }
			
		</script>
	</body>
</html>
